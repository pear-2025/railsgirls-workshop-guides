<div class="px-4 py-5 my-5 text-center">
  <h1 class="display-5 fw-bold">プロフィール</h1>
</div>

<div class="container">
  <div class="row justify-content-center">
    <div class="col-md-6">
      <div class="card text-center">
        <div class="card-body">
          <% if @user.avatar? %>
            <%= image_tag @user.avatar_url, class: "rounded-circle mb-3", width: 120, height: 120 %>
          <% else %>
            <%= image_tag "https://www.gravatar.com/avatar/#{Digest::MD5.hexdigest(@user.email.to_s.downcase)}?d=identicon", class: "rounded-circle mb-3", width: 120, height: 120 %>
          <% end %>

          <h3><%= @user.username %></h3>
          <p>レベル: <strong><%= @user.level %></strong></p>

          <div class="mb-3">
            <div class="d-flex justify-content-between mb-1">
              <small>進捗</small>
              <small><%= @user.score_in_current_level %>/5</small>
            </div>
            <div class="progress" style="height: 18px;">
              <div class="progress-bar" role="progressbar" style="width: <%= @user.progress_percentage %>%" aria-valuenow="<%= @user.progress_percentage %>" aria-valuemin="0" aria-valuemax="100"><%= @user.progress_percentage %>%</div>
            </div>
            <div class="mt-2">
              <% if @user.points_to_next_level == 0 %>
                <small class="text-success">次のレベルに到達しています。</small>
              <% else %>
                <small>次のレベルまであと <strong><%= @user.points_to_next_level %></strong> ポイント</small>
              <% end %>
            </div>
          </div>

          <div class="mt-3">
            <p>提出完了: <span class="badge bg-success"><%= @submitted %></span></p>
            <p>未提出: <span class="badge bg-warning"><%= @not_submitted %></span></p>
          </div>
          <div class="mt-3">
            <%= link_to '編集', edit_profile_path, class: 'btn btn-outline-primary' %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
